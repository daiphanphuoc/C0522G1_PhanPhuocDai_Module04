<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="/layout::head">
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>
<div class="container-fluid" >
  <div th:replace="/layout::hearder">

  </div>
  <div th:replace="/layout::navbar">

  </div>

  <div class="row">
    <div class="col-sm-3">
      <div th:replace="layout::left">

      </div>
    </div>

    <div class="col-sm-9">
      <h2 class="text-center fw-bold">CUSTOMER LIST</h2>
      <div class="row">
        <%--
        <a href="/customer?action=create">
          <button class="btn btn-success btn-sm my-2">
            <span class="fa-solid fa-person-circle-plus text-light h5 my-auto me-1"></span> Add new Customer
          </button>
        </a>
        --%>

        <fieldset>
          <form action="/customer" method="get">
            <input hidden type="text" name="action" value="search">
            <input type="text" name="searchName" th:value="${searchName}" placeholder="Nhập tên khách hàng">
            <input type="text" name="searchAddress" th:value="${searchAddress}" placeholder="Nhập địa chỉ">
            <input type="text" name="searchType" th:value="${searchType}"
                   placeholder="Nhập tên loại khách hàng">
            <button class="btn btn-success btn-sm " type="submit">Search</button>
          </form>
        </fieldset>

      </div>
      <div>


        <table class="table table-striped table-bordered border border-3 border-secondary" id="customerTable">
          <thead>
          <tr class="text-center bg-info">
            <th>STT</th>
            <th>Họ và Tên</th>
            <th>Ngày sinh</th>
            <th>Giới tính</th>
            <th>Địa chỉ</th>
            <th>Cập nhật</th>
            <th>Xóa</th>
          </tr>
          </thead>

          <tbody>
            <tr th:each="status,customer:${customers}">
              <td class="text-center" th:text="${status.count}"></td>
              <td class="view">
                <span hidden th:text="${customer.id}"></span>
                <span th:text="${customer.name}"></span>
              </td>
              <td class="text-center"th:text="${customer.birthday}"></td>

                <td class="text-center" th:if="${customer.sex}">Nam</td>


                <td class="text-center" th:unless="${customer.sex}">Nữ</td>

              <td th:text="${customer.address}"></td>
              <td class="text-center update">
                <a href="/customer?action=update&id=${customer.iDCustomer}">
                  <span class="fa-solid fa-user-pen text-primary h4 m-auto"></span>
                </a>
              </td>
              <td class="text-center delete">
                <a href="/customer?action=delete&id=${customer.iDCustomer}" data-bs-toggle="modal"
                   data-bs-target="#deleteModal"
                   onclick="deleteCustomer('${customer.iDCustomer}','${customer.name}')">
                  <span class="fa-solid fa-person-circle-minus text-danger h4 m-auto"></span>
                </a>
<!--
                <a href="/customer?action=delete&id=${customer.iDCustomer}">
                <span class="fa-solid fa-person-circle-minus text-danger h4 m-auto"></span>
              </a>
-->
              </td>
            </tr>

          </tbody>
        </table>


      </div>

    </div>
  </div>
  <div class="row">
    <div th:replace="layout::footer">

    </div>
  </div>
</div>

<<!-- Button trigger modal UPDATE-->
<button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#modelId">
  Launch
</button>

<!-- Modal UPDATE-->
<div class="modal fade" id="modelId" tabindex="-1" role="dialog" aria-labelledby="modelTitleId" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Modal title</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="row">
          <h3 class="text-center">Cập nhập khách hàng</h3>
          <form  method="post">
            <fieldset>
              <legend style="color: crimson">Thông tin khách hàng</legend>
              <table>
                <tr>
                  <td>Tên khách hàng:</td>
                  <td>
                    <input name="name" value="${customer.getName()}">
                    <input hidden name="id" value="${customer.getIDCustomer()}">
                  </td>
                </tr>
                <tr>
                  <td>Giới tính:</td>
                  <td><input name="gender" value="${customer.isSex()}"></td>
                </tr>
                <tr>
                  <td>Ngày sinh:</td>
                  <td><input type="date" name="dateOfBirth" value="${customer.getBirthday()}"></td>
                </tr>
                <tr>
                  <td>Số CMND:</td>
                  <td><input name="idCard" value="${customer.getIDCitizen()}"></td>
                </tr>
                <tr>
                  <td>Số điện thoại:</td>
                  <td><input name="phoneNumber" value="${customer.getPhone()}"></td>
                </tr>
                <tr>
                  <td>Email:</td>
                  <td><input name="email" value="${customer.getEmail()}"></td>
                </tr>
                <tr>
                  <td>Địa chỉ:</td>
                  <td><input name="address" value="${customer.getAddress()}"></td>
                </tr>
                <tr>
                  <td>Mã loại khách hàng:</td>
                  <td><input type="number" name="customerTypeId" value="${customer.getCustomerType().getId()}"></td>
                </tr>
                <tr>
                  <td></td>
                  <td><input type="submit" value="update"></td>
                </tr>
              </table>
            </fieldset>
          </form>

        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save</button>
      </div>
    </div>
  </div>
</div>



<!-- Button trigger modal CREATE-->
<button id="create" type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#createId">
  Launch
</button>

<!-- Modal CREATE-->
<div class="modal fade" id="createId" tabindex="-1" role="dialog" aria-labelledby="modelTitleId" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Modal title</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <h3>Thêm mới khách hàng</h3>


        <form action="/customer?action=create" method="post">
          <fieldset>
            <legend style="color: crimson">Thông tin khách hàng</legend>
            <table>
              <tr>
                <td>Tên khách hàng:</td>
                <td><input name="name" ></td>
              </tr>
              <tr>
                <td>Giới tính:</td>
                <td><input name="gender" ></td>
              </tr>
              <tr>
                <td>Ngày sinh:</td>
                <td><input name="dateOfBirth"type="date" ></td>
              </tr>
              <tr>
                <td>Số CMND:</td>
                <td><input name="idCard" ></td>
              </tr>
              <tr>
                <td>Số điện thoại:</td>
                <td><input name="phoneNumber" ></td>
              </tr>
              <tr>
                <td>Email:</td>
                <td><input name="email" ></td>
              </tr>
              <tr>
                <td>Địa chỉ:</td>
                <td><input name="address" ></td>
              </tr>
              <tr>
                <td>Mã loại khách hàng:</td>
                <td><input name="customerTypeId" ></td>
              </tr>
              <tr>
                <td></td>
                <td><input type="submit" value="Create"></td>
              </tr>
            </table>
          </fieldset>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
        <button type="button" class="btn btn-primary">Save</button>
      </div>
    </div>
  </div>
</div>
</body>
</html>