select ct.id as contract, c.`name` as customer, f.`name` as facility, em.`name` as employee, ct.`start` as `start`, ct.`end` as `end` , ct.deposit as deposit, (ifnull(f.rental_costs,0) + ifnull(cd.quantity,0)*ifnull(af.cost,0)) as totalMoney from contract as ct inner join customer as c on c.id = ct.customer_id inner join employee as em on em.id = ct.employee_id inner join facility as f on f.id =  ct.facility_id left join contract_detail as cd on cd.contract_id =ct.id left join attach_facility as af on af.id=  cd.attach_facility_id where ct.is_delete = 0 and c.is_delete = 0 and f.is_delete = 0 and em.is_delete = 0 group by ct.id